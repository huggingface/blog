---
title: "å¦‚ä½•æˆåŠŸå°† ðŸ¤— API å®¢æˆ·çš„ transformer æ¨¡åž‹æŽ¨ç†é€Ÿåº¦åŠ å¿« 100 å€"
thumbnail: /blog/assets/09_accelerated_inference/thumbnail.png
translators:
- user: MatrixYao
- user: zhongdongy
  proofreader: true
---

# å¦‚ä½•æˆåŠŸå°† ðŸ¤— API å®¢æˆ·çš„ transformer æ¨¡åž‹æŽ¨ç†é€Ÿåº¦åŠ å¿« 100 å€ 


ðŸ¤— Transformers å·²æˆä¸ºä¸–ç•Œå„åœ°æ•°æ®ç§‘å­¦å®¶ç”¨ä»¥æŽ¢ç´¢æœ€å…ˆè¿› NLP æ¨¡åž‹ã€æž„å»ºæ–° NLP æ¨¡å—çš„é»˜è®¤åº“ã€‚å®ƒæ‹¥æœ‰è¶…è¿‡ 5000 ä¸ªé¢„è®­ç»ƒå’Œå¾®è°ƒçš„æ¨¡åž‹ï¼Œæ”¯æŒ 250 å¤šç§è¯­è¨€ï¼Œä»»å›å–ç”¨ã€‚æ— è®ºä½ ä½¿ç”¨å“ªç§æ¡†æž¶ï¼Œéƒ½èƒ½ç”¨å¾—ä¸Šå®ƒã€‚

è™½ç„¶åœ¨ ðŸ¤— Transformers ä¸­è¯•éªŒæ¨¡åž‹å¾ˆå®¹æ˜“ï¼Œä½†ä»¥æœ€é«˜æ€§èƒ½å°†è¿™äº›å¤§æ¨¡åž‹éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­ï¼Œå¹¶å°†å®ƒä»¬ç”¨å¯æ‰©å±•çš„æž¶æž„ç®¡ç†èµ·æ¥ï¼Œå¯¹äºŽä»»ä½•æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆæ¥è¯´éƒ½æ˜¯ä¸€ä¸ª **è‰°å·¨çš„å·¥ç¨‹æŒ‘æˆ˜**ã€‚

100 å€æ€§èƒ½æå‡åŠå†…ç½®å¯æ‰©å±•æ€§æ˜¯ç”¨æˆ·é€‰æ‹©åœ¨æˆ‘ä»¬æ‰˜ç®¡çš„ [Accelerated Inference API](https://huggingface.co/pricing) åŸºç¡€ä¸Šæž„å»ºè‡ªå·±çš„ NLP æ¨¡å—çš„åŽŸå› ã€‚å°¤å…¶æ˜¯ä¸ºäº†å®žçŽ° **æœ€åŽé‚£ 10 å€æ€§èƒ½** æå‡ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œåº•å±‚çš„ã€ç‰¹å®šäºŽæ¨¡åž‹ä¸”ç‰¹å®šäºŽç›®æ ‡ç¡¬ä»¶çš„ä¼˜åŒ–ã€‚

æœ¬æ–‡åˆ†äº«äº†æˆ‘ä»¬ä¸ºç”¨æˆ·å……åˆ†æ¦¨å¹²æ¯ä¸€æ»´è®¡ç®—èµ„æºæ‰€ä½¿ç”¨çš„ä¸€äº›æ–¹æ³•ã€‚ ðŸ‹

## èŽ·å–é¦–ä¸ª 10 å€åŠ é€Ÿ

ä¼˜åŒ–ä¹‹æ—…çš„ç¬¬ä¸€ç«™ç›¸å¯¹æ¥è®²æ˜¯æœ€å®¹æ˜“çš„ï¼Œä¸»è¦æ¶‰åŠåˆ° [Hugging Face åº“](https://github.com/huggingface/) æä¾›çš„æ‰€æœ‰å¹³å°æ— å…³çš„ä¼˜åŒ–æŠ€æœ¯ã€‚

æˆ‘ä»¬åœ¨ Hugging Face æ¨¡åž‹çš„ [æµæ°´çº¿ (`pipeline` )](https://huggingface.co/transformers/main_classes/pipelines.html) ä¸­é›†æˆäº†èƒ½æœ‰æ•ˆå‡å°‘æ¯æ¬¡å‰å‘ä¼ æ’­è®¡ç®—é‡çš„æœ€ä½³æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•å› æ¨¡åž‹æž¶æž„å’Œç›®æ ‡ä»»åŠ¡ä¸åŒè€Œä¸åŒï¼Œä¾‹å¦‚ï¼Œå¯¹åŸºäºŽ GPT æž¶æž„çš„æ¨¡åž‹çš„æ–‡æœ¬ç”Ÿæˆä»»åŠ¡ï¼Œæˆ‘ä»¬é€šè¿‡ç¼“å­˜è¿‡åŽ»æ—¶åˆ»çš„æ³¨æ„åŠ›çŸ©é˜µï¼Œè€Œä»…è®¡ç®—æ¯ä¸€è½®ä¸­æœ€åŽä¸€ä¸ªæ–°è¯å…ƒçš„æ³¨æ„åŠ›ï¼Œæ¥å‡å°å‚ä¸Žè®¡ç®—çš„æ³¨æ„åŠ›çŸ©é˜µçš„ç»´åº¦:

-| åŽŸå§‹ç‰ˆ | ä¼˜åŒ–ç‰ˆ |
-|:---------------------------------------------------------------------------------------------------------:|:-------------------------------------------------------------------------------------------------------:|
-|![](/blog/assets/09_accelerated_inference/unoptimized_graph.png)|![](/blog/assets/09_accelerated_inference/optimized_graph.png)|

åˆ†è¯å¸¸å¸¸æˆä¸ºæŽ¨ç†æ•ˆçŽ‡çš„ç“¶é¢ˆã€‚æˆ‘ä»¬åœ¨ [ðŸ¤— Tokenizers](https://github.com/huggingface/tokenizers/) åº“ä¸­å®žçŽ°äº†é«˜æ•ˆçš„ç®—æ³•ï¼Œç”¨ Rust æ¥å®žçŽ°æ¨¡åž‹åˆ†è¯å™¨å¹¶ä¸Žæ™ºèƒ½ç¼“å­˜æŠ€æœ¯ç›¸ç»“åˆï¼ŒèŽ·å¾—äº†é«˜è¾¾ 10 å€çš„ç«¯åˆ°ç«¯å»¶è¿ŸåŠ é€Ÿã€‚

åˆ©ç”¨ Hugging Face åº“çš„æœ€æ–°åŠŸèƒ½ï¼Œåœ¨ç›¸åŒçš„æ¨¡åž‹åŠç¡¬ä»¶ä¸Šï¼Œä¸Žå¼€ç®±å³ç”¨çš„éƒ¨ç½²ç›¸æ¯”ï¼Œæˆ‘ä»¬ç¨³å®šè¾¾åˆ°äº† 10 å€åŠ é€Ÿã€‚ç”±äºŽ Transformer å’Œ Tokenizer é€šå¸¸æ¯æœˆéƒ½ä¼šå‘ç‰ˆï¼Œå› æ­¤æˆ‘ä»¬çš„ API å®¢æˆ·æ— éœ€ä¸æ–­é€‚é…æ–°çš„ä¼˜åŒ–ï¼Œå³å¯è®©è‡ªå·±çš„æ¨¡åž‹è¶Šè·‘è¶Šå¿«ã€‚

## ä¸ºäº†èƒœåˆ©è€Œç¼–è¯‘: 10 å€åŠ é€Ÿç¡¬æ ¸æŠ€æœ¯

çŽ°åœ¨åˆ°çœŸæ­£æ£˜æ‰‹çš„åœ°æ–¹äº†ã€‚ä¸ºäº†èŽ·å¾—æœ€ä½³æ€§èƒ½ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹æ¨¡åž‹å¹¶é’ˆå¯¹ç‰¹å®šç¡¬ä»¶è¿›è¡Œç¼–è¯‘ä»¥ä¼˜åŒ–æŽ¨ç†é€Ÿåº¦ã€‚é€‰æ‹©ä»€ä¹ˆç¡¬ä»¶å–å†³äºŽæ¨¡åž‹ (å†…å­˜å¤§å°) å’Œéœ€æ±‚æƒ…å†µ (å¯¹è¯·æ±‚è¿›è¡Œç»„æ‰¹)ã€‚å³ä½¿æ˜¯ä½¿ç”¨ç›¸åŒçš„æ¨¡åž‹æ¥è¿›è¡Œé¢„æµ‹ï¼Œä¸€äº› API å®¢æˆ·å¯èƒ½ä¼šæ›´å—ç›ŠäºŽ CPU æŽ¨ç†åŠ é€Ÿï¼Œè€Œå…¶ä»–å®¢æˆ·å¯èƒ½ä¼šæ›´å—ç›ŠäºŽ GPU æŽ¨ç†åŠ é€Ÿï¼Œè€Œæ¯ç§ç¡¬ä»¶ä¼šæ¶‰åŠä¸åŒçš„ä¼˜åŒ–æŠ€æœ¯ä»¥åŠåº“ã€‚

ä¸€æ—¦ä¸ºé’ˆå¯¹åº”ç”¨åœºæ™¯é€‰å®šè®¡ç®—å¹³å°ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹å·¥ä½œäº†ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯åº”ç”¨äºŽé™æ€å›¾çš„é’ˆå¯¹ CPU çš„ä¼˜åŒ–æŠ€æœ¯:

- å›¾ä¼˜åŒ– (åˆ é™¤æ— ç”¨èŠ‚ç‚¹å’Œè¾¹)
- å±‚èžåˆ (ä½¿ç”¨ç‰¹å®šçš„ CPU ç®—å­)
- é‡åŒ–

ä½¿ç”¨å¼€æºåº“ä¸­çš„å¼€ç®±å³ç”¨åŠŸèƒ½ (ä¾‹å¦‚ ðŸ¤— Transformers ç»“åˆ [ONNX Runtime](https://github.com/microsoft/onnxruntime)) å¾ˆéš¾å¾—åˆ°æœ€ä½³çš„ç»“æžœï¼Œæˆ–è€…ä¼šæœ‰æ˜Žæ˜¾çš„å‡†ç¡®çŽ‡æŸå¤±ï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨é‡åŒ–æ–¹æ³•æ—¶ã€‚æ²¡æœ‰ä»€ä¹ˆçµä¸¹å¦™è¯ï¼Œæ¯ä¸ªæ¨¡åž‹æž¶æž„çš„æœ€ä½³ä¼˜åŒ–æ–¹æ¡ˆéƒ½ä¸åŒã€‚ä½†æ·±å…¥ç ”ç©¶ Transformers ä»£ç å’Œ ONNX Runtime æ–‡æ¡£ï¼Œæ˜Ÿå›¾å³ä¼šæ˜¾çŽ°ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿç»„åˆå‡ºé€‚åˆç›®æ ‡æ¨¡åž‹å’Œç¡¬ä»¶çš„é¢å¤–çš„ 10 å€åŠ é€Ÿæ–¹æ¡ˆã€‚

## ä¸å…¬å¹³çš„ä¼˜åŠ¿

ä»Ž NLP èµ·å®¶çš„ Transformer æž¶æž„æ˜¯æœºå™¨å­¦ä¹ æ€§èƒ½çš„å†³å®šæ€§è½¬æŠ˜ç‚¹ï¼Œåœ¨è¿‡åŽ» 3 å¹´ä¸­ï¼Œè‡ªç„¶è¯­è¨€ç†è§£å’Œç”Ÿæˆçš„è¿›å±•æ€¥å‰§åŠ å¿«ï¼ŒåŒæ—¶æ°´æ¶¨èˆ¹é«˜çš„æ˜¯æ¨¡åž‹çš„å¹³å‡å¤§å°ï¼Œä»Ž BERT çš„ 110M å‚æ•°åˆ°çŽ°åœ¨ GPT-3 çš„ 175B å‚æ•°ã€‚

è¿™ç§è¶‹åŠ¿ç»™æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆå°†æœ€æ–°æ¨¡åž‹éƒ¨ç½²åˆ°ç”Ÿäº§ä¸­å¸¦æ¥äº†ä¸¥å³»çš„æŒ‘æˆ˜ã€‚è™½ç„¶ 100 å€åŠ é€Ÿæ˜¯ä¸€ä¸ªå¾ˆé«˜çš„æ ‡å‡†ï¼Œä½†æƒŸæœ‰è¿™æ ·æ‰èƒ½æ»¡è¶³æ¶ˆè´¹çº§åº”ç”¨å¯¹å®žæ—¶æ€§çš„éœ€æ±‚ã€‚

ä¸ºäº†è¾¾åˆ°è¿™ä¸ªæ ‡å‡†ï¼Œä½œä¸º Hugging Face çš„æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆï¼Œæˆ‘ä»¬ä¸Ž ðŸ¤— Transformers å’Œ  ðŸ¤— Tokenizers ç»´æŠ¤äººå‘˜ ðŸ˜¬ ç›¸é‚»è€Œåï¼Œç›¸å¯¹å…¶ä»–æœºå™¨å­¦ä¹ å·¥ç¨‹å¸ˆè€Œè¨€å½“ç„¶æ‹¥æœ‰ä¸å…¬å¹³çš„ä¼˜åŠ¿ã€‚æ›´å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡ä¸Žè‹±ç‰¹å°”ã€è‹±ä¼Ÿè¾¾ã€é«˜é€šã€äºšé©¬é€Šå’Œå¾®è½¯ç­‰ç¡¬ä»¶åŠäº‘ä¾›åº”å•†çš„å¼€æºåˆä½œå»ºç«‹èµ·çš„å¹¿æ³›åˆä½œä¼™ä¼´å…³ç³»ï¼Œæˆ‘ä»¬è¿˜èƒ½å¤Ÿä½¿ç”¨æœ€æ–°çš„ç¡¬ä»¶ä¼˜åŒ–æŠ€æœ¯æ¥ä¼˜åŒ–æˆ‘ä»¬çš„æ¨¡åž‹åŠåŸºç¡€è®¾æ–½ã€‚

å¦‚æžœä½ æƒ³æ„Ÿå—æˆ‘ä»¬åŸºç¡€è®¾æ–½çš„é€Ÿåº¦ï¼Œå¯ä»¥ [å…è´¹è¯•ç”¨](https://huggingface.co/pricing) ä¸€ä¸‹ï¼Œæˆ‘ä»¬ä¹Ÿä¼šä¸Žä½ è”ç³»ã€‚
å¦‚æžœä½ æƒ³åœ¨è‡ªå·±çš„åŸºç¡€è®¾æ–½å®žæ–½æˆ‘ä»¬çš„æŽ¨ç†ä¼˜åŒ–ï¼Œè¯·åŠ å…¥æˆ‘ä»¬çš„ [ðŸ¤— ä¸“å®¶åŠ é€Ÿè®¡åˆ’](https://huggingface.co/support)ã€‚

---

>>>> è‹±æ–‡åŽŸæ–‡: <url>https://huggingface.co/blog/accelerated-inference</url>
>>>>
>>>> åŽŸæ–‡ä½œè€…: Hugging Face
>>>>
>>>> è¯‘è€…: Matrix Yao (å§šä¼Ÿå³°)ï¼Œè‹±ç‰¹å°”æ·±åº¦å­¦ä¹ å·¥ç¨‹å¸ˆï¼Œå·¥ä½œæ–¹å‘ä¸º transformer-family æ¨¡åž‹åœ¨å„æ¨¡æ€æ•°æ®ä¸Šçš„åº”ç”¨åŠå¤§è§„æ¨¡æ¨¡åž‹çš„è®­ç»ƒæŽ¨ç†ã€‚
>>>>
>>>> å®¡æ ¡/æŽ’ç‰ˆ: zhongdongy (é˜¿ä¸œ)